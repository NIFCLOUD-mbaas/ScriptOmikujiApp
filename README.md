# ScriptOmikujiApp
【ニフクラ mobile backend スクリプト機能】おみくじアプリを作ってみよう

## はじめに
mobile backend のスクリプト機能を使ってみたいけどどこから手を付けたらいいものか・・・<br>
という方向けにスクリプト機能を活用した簡単なアプリ制作ができる「チュートリアル」を用意しました。<br>
<br>
手順通り進めるだけで簡単にアプリが完成できます。<br>
<br>
* 所要時間目安： 15分～30分程度

## 作成するアプリの概要

このチュートリアルで作成する「おみくじアプリ」にはあえて mobile backend の「スクリプト機能」を活用しています。

### ニフクラ mobile backend の「スクリプト機能」とは？

> サーバーサイドにスクリプトを設置できる機能です。
> 簡単なロジックを置くことで、独自機能の拡張などを行い、より柔軟にmobile backendをご利用いただけます。
> 管理画面から、もしくはAPI経由で、スクリプトの実行が可能です。
> クライアント側に持たせたくないロジックをクラウド側で処理させることで、チート対策やクライアントアプリの軽量化にも繋がります。
> 
> ■対応言語：JavaScript(Node.js) / Ruby

（https://mbaas.nifcloud.com/function.htm#script より抜粋）

---

「おみくじアプリ」を作成する上で重要になってくるのが、
* おみくじを引くと何がどれくらいの確率で出るのか？

ということです。この部分「結果の種類」とそれらの「確率」の情報を「スクリプト機能」を活用して、 __サーバー側__ に持たせて作成します。

### スクリプトを使うと何か良いのか？
おみくじを引くと「どんな結果」が「どんな確率」で出るのか、その情報をアプリ側に持たせて作成することももちろん可能です。しかし、サーバー側に「重要なデータ」を保持することが実は大切です！
* アプリを解析され、確率データを盗み取られたり、書き換えられたリなど、チート対策としても有効
* アプリ側のアップデートをしなくても、確率や結果の変更など自由に対応が可能

など、アプリ側は常にユーザーに触れる部分であるため、悪意のあるユーザーに渡れば解析され情報が書き変えられてしまう可能性があります。そこで、大事なデータをサーバーに置くことが有益となってくるわけです。さらに、アプリのアップデートは申請をして許可が下りるまで中々時間が掛かるものです。軽微な修正などは、アップデート無しで実装できたら嬉しいですよね。これも情報をサーバー側に保持しておくことで、サーバー側の修正を反映するだけでアプリ側のコンテンツマネジメントが可能になります。

それでは、スクリプトを活用するメリットが少しわかったところで、スクリプト機能を活用した「おみくじアプリ」を作成してみましょう。

## 事前準備
* 開発環境準備
   * Windows でも Mac でもブラウザとして「Google Chrome」のインストールされていれば利用可能です
* ニフクラ mobile backend アカウント作成 ＞ 下記URLよりSNSアカウントにて登録（無料）
   * https://mbaas.nifcloud.com/doc/current/
* Monaca または Monaca Education アカウント作成 ＞ 下記URLより登録（Freeプランあり）
   * Monaca https://monaca.mobi/ja/signup
   * Monaca Education https://monaca.education/ja/signup
* 任意の「テキストエディタ」をインストール
   *  JSファイル作成に必要です
   *  なんでもOKですが、「Atom」「サクラエディタ」などがおすすめです
